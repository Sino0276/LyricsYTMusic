"""
전역 상수 모음.
하드코딩된 매직 넘버와 설정값을 한 곳에서 관리합니다.
"""

# ── 폴링 / 동기화 간격 (ms) ──────────────────────────────────────────────────
POLL_INTERVAL_MS: int = 500          # 곡 변경 감지 간격 (일반)
POLL_INTERVAL_SLOW_MS: int = 5000    # 최소화 시 감지 간격
SYNC_INTERVAL_MS: int = 500          # 가사 동기화 간격 (일반)
SYNC_INTERVAL_SLOW_MS: int = 2000    # 최소화 시 동기화 간격

# ── UI 기본값 ─────────────────────────────────────────────────────────────────
DEFAULT_WINDOW_WIDTH: int = 400
DEFAULT_WINDOW_HEIGHT: int = 500
DEFAULT_WINDOW_MARGIN_X: int = 50    # 화면 우측 여백
DEFAULT_WINDOW_MARGIN_Y: int = 100   # 화면 하단 여백

# ── 가사 검색 ─────────────────────────────────────────────────────────────────
MAX_SEARCH_ATTEMPTS: int = 4
LYRICS_CACHE_FILE: str = "lyrics_cache.json"
# 가사 길이 유효성 검증 허용 오차 (10초)
LYRICS_DURATION_TOLERANCE_MS: int = 10_000
# 병렬 검색 최대 워커 수
LYRICS_SEARCH_MAX_WORKERS: int = 8
# 1순위 결과 대기 최대 시간 (초)
LYRICS_SEARCH_TIMEOUT_SEC: float = 3.0

# ── 번역 ──────────────────────────────────────────────────────────────────────
TRANSLATION_BATCH_SIZE: int = 10
TRANSLATION_SAMPLE_COUNT: int = 30
# 전체 가사 중 번역 대상 비율 임계값 (10% 이상이면 번역 실행)
TRANSLATION_THRESHOLD: float = 0.1
TRANSLATION_SEPARATOR: str = " ||| "

# ── 브라우저 창 클래스명 ──────────────────────────────────────────────────────
BROWSER_WINDOW_CLASSES: list[str] = [
    "Chrome_WidgetWin_1",   # Chrome, Edge
    "MozillaWindowClass",   # Firefox
]

# ── 가사 검색 프로바이더 ──────────────────────────────────────────────────────
LYRICS_PROVIDERS_PRIORITY: list[str] = ["musixmatch", "lrclib", "netease"]
LYRICS_PROVIDERS_ALL: list[str] = ["musixmatch", "netease", "lrclib", "megalobiz"]

# ── 히라가나 → 한글 매핑 테이블 ──────────────────────────────────────────────
# translator.py의 _map_hiragana_to_hangul 메서드 내부에서 상수로 분리
HIRAGANA_TO_HANGUL: dict[str, str] = {
    "あ": "아", "い": "이", "う": "우", "え": "에", "お": "오",
    "か": "카", "き": "키", "く": "쿠", "け": "케", "こ": "코",
    "さ": "사", "し": "시", "す": "스", "せ": "세", "そ": "소",
    "た": "타", "ち": "치", "つ": "츠", "て": "테", "と": "토",
    "な": "나", "に": "니", "ぬ": "누", "ね": "네", "の": "노",
    "は": "하", "ひ": "히", "ふ": "후", "へ": "헤", "ほ": "호",
    "ま": "마", "み": "미", "む": "무", "め": "메", "も": "모",
    "や": "야", "ゆ": "유", "よ": "요",
    "ら": "라", "り": "리", "る": "루", "れ": "레", "ろ": "로",
    "わ": "와", "を": "오",
    "が": "가", "ぎ": "기", "ぐ": "구", "げ": "게", "ご": "고",
    "ざ": "자", "じ": "지", "ず": "즈", "ぜ": "제", "ぞ": "조",
    "だ": "다", "ぢ": "지", "づ": "즈", "で": "데", "ど": "도",
    "ば": "바", "び": "비", "ぶ": "부", "べ": "베", "ぼ": "보",
    "ぱ": "파", "ぴ": "피", "ぷ": "푸", "ぺ": "페", "ぽ": "포",
    # 작은 모음
    "ぁ": "아", "ぃ": "이", "ぅ": "우", "ぇ": "에", "ぉ": "오",
}

# 요음 (拗音) 조합 매핑
YOUON_TO_HANGUL: dict[str, str] = {
    "きゃ": "캬", "きゅ": "큐", "きょ": "쿄",
    "しゃ": "샤", "しゅ": "슈", "しょ": "쇼",
    "ちゃ": "챠", "ちゅ": "츄", "ちょ": "쵸",
    "にゃ": "냐", "にゅ": "뉴", "にょ": "뇨",
    "ひゃ": "햐", "ひゅ": "휴", "ひょ": "효",
    "みゃ": "먀", "みゅ": "뮤", "みょ": "묘",
    "りゃ": "랴", "りゅ": "류", "りょ": "료",
    "ぎゃ": "갸", "ぎゅ": "규", "ぎょ": "교",
    "じゃ": "쟈", "じゅ": "쥬", "じょ": "죠",
    "びゃ": "뱌", "びゅ": "뷰", "びょ": "뵤",
    "ぴゃ": "퍄", "ぴゅ": "퓨", "ぴょ": "표",
}

# ん 발음 규칙 - ㅁ으로 발음되는 뒤따르는 문자 집합
N_AS_M_CHARS: frozenset[str] = frozenset("まみむめもばびぶべぼぱぴぷぺぽ")
# ん 발음 규칙 - ㄴ으로 발음되는 뒤따르는 문자 집합
N_AS_N_CHARS: frozenset[str] = frozenset("なにぬねのたちつてとだぢづでどらりるれろ")

# 받침 코드 매핑 (한글 유니코드 조합용)
JONGSEONG_MAP: dict[str, int] = {
    "ㅁ": 16, "ㄴ": 4, "ㅇ": 21, "ㄹ": 8, "ㄱ": 1, "ㅂ": 17, "ㅅ": 19,
}

# 일본어 가사에서 자주 쓰이는 단어의 읽는 법 오버라이드 (Heuristic)
JAPANESE_READING_OVERRIDES: dict[str, str] = {
    "愛しい": "いとしい",
    "愛してる": "あいしてる",
    "愛して": "あいして",
    "愛": "あい",
    "君": "きみ",
    "僕": "ぼく",
    "俺": "おれ",
    "私": "わたし",
    "側に": "そばに",
    "側で": "そばで",
    "瞳": "ひとみ",
    "光": "ひかり",
    "闇": "やみ",
    "空": "そら",
    "風": "かぜ",
    "涙": "なみだ",
}
